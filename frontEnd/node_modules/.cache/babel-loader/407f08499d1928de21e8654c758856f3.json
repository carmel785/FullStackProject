{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/carmelklein/GitProjects/FullStackProject/frontEnd/src/Components/AllMembers.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { UserContext } from './Contexts';\nimport { useContext, useEffect, useState } from 'react';\nimport SubscribeMovie from \"./SubscribeMovie\";\n\nconst AllMembers = () => {\n  _s();\n\n  const [members, setMembers] = useState([]);\n  const [subscriptions, setSubscriptions] = useState([]);\n  const [subClicked, setSubClicked] = useState([]);\n  const [watchedMovies, setWatchedMovies] = useState([]);\n  const context = useContext(UserContext);\n  useEffect(() => {\n    console.log(\"All Members: \" + context); //getting the members from the Web Service\n\n    axios.get('http://localhost:4000/routingToFront/membersToClient').then(x => {\n      setMembers(x.data);\n    }); //getting the subscriptions from the Web Service(DB)\n\n    axios.get('http://localhost:4000/routingToFront/subscriptionToClient').then(x => {\n      setSubscriptions(x.data);\n    });\n  }, []);\n  useEffect(() => {\n    //create array of falses the represent the members who clicked on Subscribe for new movie\n    let falseArr = [];\n    members.map(x => {\n      falseArr.push(false);\n    });\n    setSubClicked(falseArr);\n  }, [members]); //hook that affected by other hook need to put his get function inside the useeffect []\n  // create the watchedMovies array\n\n  useEffect(() => {\n    let movArr = [];\n    subscriptions.forEach(x => {\n      {\n        x.Movies.forEach(y => {\n          // console.log(y)\n          movArr.push({\n            movie: y.movieName,\n            id: x.MemberId\n          });\n        });\n      }\n    });\n    setWatchedMovies(movArr);\n  }, [subscriptions]); // console.log(watchedMovies)\n\n  function splitMoviesToMembers(memberId) {\n    let mWatched = [];\n    watchedMovies.forEach(movie => {\n      if (movie.id == memberId) {\n        mWatched.push(movie.movie);\n      }\n    });\n    return mWatched;\n  }\n\n  const openSubscribe = index => {\n    if (subClicked[index] == false) {\n      subClicked[index] = true;\n      setSubClicked(subClicked);\n    } else {\n      subClicked[index] = false;\n      setSubClicked(subClicked);\n    }\n\n    console.log(subClicked);\n  };\n\n  const subscribeVisible = (index, item) => {\n    // let arr = subClicked\n    // // console.log(arr)\n    // // return arr[index]\n    // return arr[index]\n    console.log(subClicked[index]);\n\n    if (subClicked[index] === true) {\n      console.log(index); // return <SubscribeMovie index = {index} item = {item} movies = {splitMoviesToMembers(item._id)}/>\n    } else {\n      return /*#__PURE__*/_jsxDEV(SubscribeMovie, {\n        index: index,\n        item: item,\n        movies: splitMoviesToMembers(item._id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 18\n      }, this); // console.log(\"fsd\")\n    }\n  };\n\n  const subscriptionItems = (index, item) => {\n    return subscriptions.map((item2, index2) => {\n      //  <ul key = {index}>\n      if (item._id === item2.MemberId) {\n        return item2.Movies.map((item3, index3) => {\n          // console.log(m.movieName)\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [item3.movieName, \", \", item3.date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)\n          }, index3, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 22\n          }, this);\n        });\n      } // </ul>\n\n    });\n  };\n\n  useEffect(() => {\n    let items = members.map((item, index) => {\n      let mWatched = [];\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w3-blue w3-hover-shadow w3-padding-32 w3-bordered w3-code\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: item.Name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 12\n        }, this), \"Email: \", item.Email, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 31\n        }, this), \"City: \", item.City, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 30\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"button\",\n          value: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"button\",\n          value: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w3-green w3-hover-shadow w3-padding-32 w3-bordered w3-code\",\n          style: {\n            border: \"3px solid\"\n          },\n          children: [\"Movies watched \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"button\",\n            value: \"Subscribe to new movie\",\n            onClick: () => openSubscribe(index)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 12\n          }, this), console.log(subClicked[index]), subClicked[index] ? /*#__PURE__*/_jsxDEV(SubscribeMovie, {\n            index: index,\n            item: item,\n            movies: splitMoviesToMembers(item._id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 34\n          }, this) : \"asda\", /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: subscriptionItems(index, item)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 12\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 18\n      }, this);\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: items\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 8\n  }, this); // const addItem = () =>{\n  //   setItem([...item,{id: item.length}])\n  // }\n  // return(\n  //   <div>\n  //     <button onClick = {addItem}>Add number</button>\n  //     <ul>\n  //       {item.map(item => (\n  //         <li key = {item.id} >{item.id}</li>\n  //       ))}\n  //     </ul>\n  //   </div>\n  // )\n};\n\n_s(AllMembers, \"pt0l0VH86QK+4qGzMTF4BIZNqNc=\");\n\n_c = AllMembers;\nexport default AllMembers;\n\nvar _c;\n\n$RefreshReg$(_c, \"AllMembers\");","map":{"version":3,"sources":["/Users/carmelklein/GitProjects/FullStackProject/frontEnd/src/Components/AllMembers.js"],"names":["axios","UserContext","useContext","useEffect","useState","SubscribeMovie","AllMembers","members","setMembers","subscriptions","setSubscriptions","subClicked","setSubClicked","watchedMovies","setWatchedMovies","context","console","log","get","then","x","data","falseArr","map","push","movArr","forEach","Movies","y","movie","movieName","id","MemberId","splitMoviesToMembers","memberId","mWatched","openSubscribe","index","subscribeVisible","item","_id","subscriptionItems","item2","index2","item3","index3","date","items","Name","Email","City","border"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport {UserContext} from './Contexts'\nimport {useContext, useEffect, useState} from 'react'\nimport SubscribeMovie from \"./SubscribeMovie\"\nconst AllMembers  = () =>\n{\n\n    const [members,setMembers] = useState([])\n    const [subscriptions,setSubscriptions] = useState([])\n    const [subClicked, setSubClicked] = useState([])\n    const [watchedMovies, setWatchedMovies] = useState([])\n\n\n    const context = useContext(UserContext)\n   \n    useEffect(() => {\n        console.log(\"All Members: \"+context)\n\n        //getting the members from the Web Service\n        axios.get('http://localhost:4000/routingToFront/membersToClient')\n          .then(x=>{setMembers(x.data)})\n        \n        \n        //getting the subscriptions from the Web Service(DB)\n        axios.get('http://localhost:4000/routingToFront/subscriptionToClient')\n          .then(x=>{setSubscriptions(x.data)})\n\n        \n      },[]);\n\n\n      useEffect(()=>\n      {\n        //create array of falses the represent the members who clicked on Subscribe for new movie\n        let falseArr = []\n        members.map(x=> {\n          falseArr.push(false)\n        })\n        setSubClicked(falseArr)\n      },[members]) //hook that affected by other hook need to put his get function inside the useeffect []\n\n        // create the watchedMovies array\n        useEffect(()=>\n        {\n          let movArr = []\n          subscriptions.forEach((x)=>{\n            {\n              x.Movies.forEach((y)=>\n              {\n                // console.log(y)\n                movArr.push({movie: y.movieName, id: x.MemberId})\n              })\n            }\n              \n           })\n           setWatchedMovies(movArr)\n        },[subscriptions])\n      // console.log(watchedMovies)\n\n     \n      \n\n      function splitMoviesToMembers(memberId)\n      {\n        let mWatched = []\n         watchedMovies.forEach(movie =>\n          {\n            if(movie.id == memberId)\n            {\n              mWatched.push(movie.movie)\n            }\n          })\n          return mWatched\n      }\n\n       const openSubscribe = (index) =>\n       {\n        if(subClicked[index] == false)\n         {\n          subClicked[index] = true\n           setSubClicked(subClicked)\n         }\n         else\n         {\n          subClicked[index] = false\n          setSubClicked(subClicked)\n         }\n         console.log(subClicked)\n       }\n\n       const subscribeVisible = (index,item) =>\n       {\n          // let arr = subClicked\n          // // console.log(arr)\n          // // return arr[index]\n          // return arr[index]\n          \n          console.log(subClicked[index])\n        if(subClicked[index] === true)\n        {\n          console.log(index)\n          // return <SubscribeMovie index = {index} item = {item} movies = {splitMoviesToMembers(item._id)}/>\n        }\n        else{\n          return <SubscribeMovie index = {index} item = {item} movies = {splitMoviesToMembers(item._id)}/>\n          // console.log(\"fsd\")\n        }\n       }\n\n       const subscriptionItems = (index,item) =>\n       {\n         return subscriptions.map((item2,index2)=>{\n          //  <ul key = {index}>\n\n          if(item._id === item2.MemberId)\n          {\n\n            return item2.Movies.map((item3,index3)=>\n            {\n              // console.log(m.movieName)\n              return <div key = {index3}>\n              <li>{item3.movieName}, {item3.date}</li>\n              </div>\n            })\n          \n          }\n          // </ul>\n         })\n       }\n      useEffect(()=>\n      {\n        let items = members.map((item,index)=>\n        {\n          let mWatched = []\n          return <div key = {index} className=\"w3-blue w3-hover-shadow w3-padding-32 w3-bordered w3-code\">\n           <h4>{item.Name}</h4>\n           Email: {item.Email}<br/>\n           City: {item.City} <br/>\n         \n           <input type =\"button\" value = \"Edit\" />\n           <input type =\"button\" value = \"Delete\"/>\n           <div className=\"w3-green w3-hover-shadow w3-padding-32 w3-bordered w3-code\" style= {{border: \"3px solid\"}}>\n           Movies watched <br/>\n           <input type =\"button\" value = \"Subscribe to new movie\" onClick = {() => openSubscribe(index)} />\n           {console.log(subClicked[index])}\n           {(subClicked[index] ? <SubscribeMovie index = {index} item = {item} movies = {splitMoviesToMembers(item._id)}/> : \"asda\")}\n  \n          <ul>\n          {subscriptionItems(index,item)}\n          </ul>\n           </div>\n          </div>\n        })\n  \n      })\n      \n    return(\n       <div>\n       \n       {items}\n       </div>\n    ) \n\n      \n\n      // const addItem = () =>{\n      //   setItem([...item,{id: item.length}])\n      // }\n\n    // return(\n    //   <div>\n    //     <button onClick = {addItem}>Add number</button>\n    //     <ul>\n    //       {item.map(item => (\n    //         <li key = {item.id} >{item.id}</li>\n    //       ))}\n    //     </ul>\n    //   </div>\n    // )\n}\n\nexport default AllMembers\n"]},"metadata":{},"sourceType":"module"}